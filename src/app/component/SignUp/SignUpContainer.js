import React from "react";
import Form from "./Form";
import { auth } from "../../../firebase";
import { postUser, getUser } from "../../../firebase/firestore/user";
import * as routes from "../../../constants/routes";

class SignUpContainer extends React.Component {
  state = {
    name: "",
    username: "",
    email: "",
    password: "",
    photo:
      "data:image/jpeg;base64,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",
    isChecked: false
  };

  handleInput = ({ target }) => this.setState({ [target.name]: target.value });

  handleSubmit = e => {
    e.preventDefault();

    // getUser(this.state).then(user => {
    // if (!user.exists) {
    this.handleRegister();
    // }

    // alert("ja tem porra");
    // });
  };

  handleRegister = () => {
    const { history } = this.props;

    return auth
      .doSignUpWithEmailAndPassword(this.state)
      .then(({ user }) => {
        postUser(this.state, user.uid).then(res => {
          auth.doSignInWithEmailAndPassword(this.state).then(res => {
            history.push(`${routes.MAIN_BASE}`);
          });
        });
      })
      .catch(console.error);
  };

  render() {
    return (
      <Form
        handleInput={this.handleInput}
        handleSubmit={this.handleSubmit}
        inputs={this.state}
      />
    );
  }
}

export default SignUpContainer;
